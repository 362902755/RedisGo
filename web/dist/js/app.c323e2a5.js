(function(t){function s(s){for(var a,o,n=s[0],d=s[1],c=s[2],_=0,p=[];_<n.length;_++)o=n[_],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in d)Object.prototype.hasOwnProperty.call(d,a)&&(t[a]=d[a]);l&&l(s);while(p.length)p.shift()();return r.push.apply(r,c||[]),e()}function e(){for(var t,s=0;s<r.length;s++){for(var e=r[s],a=!0,n=1;n<e.length;n++){var d=e[n];0!==i[d]&&(a=!1)}a&&(r.splice(s--,1),t=o(o.s=e[0]))}return t}var a={},i={app:0},r=[];function o(s){if(a[s])return a[s].exports;var e=a[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=a,o.d=function(t,s,e){o.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,s){if(1&s&&(t=o(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)o.d(e,a,function(s){return t[s]}.bind(null,a));return e},o.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="/dist/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],d=n.push.bind(n);n.push=s,n=n.slice();for(var c=0;c<n.length;c++)s(n[c]);var l=d;r.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"034f":function(t,s,e){"use strict";var a=e("64a9"),i=e.n(a);i.a},4678:function(t,s,e){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var s=r(t);return e(s)}function r(t){if(!e.o(a,t)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return a[t]}i.keys=function(){return Object.keys(a)},i.resolve=r,t.exports=i,i.id="4678"},"56d7":function(t,s,e){"use strict";e.r(s);var a=e("2b0e"),i=e("f23d"),r=(e("202f"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[e("a-layout",{staticClass:"layout",attrs:{id:"components-layout-demo-top"}},[e("a-layout-header",[e("div",{staticClass:"logo"}),e("a-row",[e("a-col",{attrs:{span:17}},[e("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal",defaultSelectedKeys:["redis_info"]},on:{click:t.menuClick}},[e("a-menu-item",{key:"redis_info"},[e("a-icon",{attrs:{type:"info-circle"}}),t._v("系统详情")],1),e("a-menu-item",{key:"redis_monitor"},[e("a-icon",{attrs:{type:"dashboard"}}),t._v("性能监控")],1),e("a-menu-item",{key:"redis_pubsub"},[e("a-icon",{attrs:{type:"swap"}}),t._v("发布订阅")],1)],1)],1),e("a-col",{attrs:{span:5}},[e("a-row",{attrs:{type:"flex",justify:"end"}},[e("a-col",{attrs:{span:10}},[e("a-select",{staticStyle:{width:"150px"},attrs:{value:t.redis_ip},on:{change:t.change_redis}},t._l(t.containers,(function(s){return e("a-select-option",{key:s.ip,attrs:{value:s.ip}},[t._v(t._s(s.name))])})),1)],1),e("a-col",{attrs:{span:2,offset:1}},[e("a-dropdown",[e("a-icon",{staticClass:"ant-dropdown-link",staticStyle:{color:"#ffffff","font-size":"28px","padding-top":"17px"},attrs:{type:"setting"}}),e("a-menu",{attrs:{slot:"overlay"},on:{click:t.settingClick},slot:"overlay"},[e("a-menu-item",{key:"about"},[e("a-icon",{attrs:{type:"info-circle"}}),t._v("关于程序")],1),e("a-menu-item",{key:"update"},[e("a-icon",{attrs:{type:"reload"}}),t.updateFlag?e("a-badge",{attrs:{status:"error"}},[t._v("更新通知")]):e("span",[t._v("更新通知")])],1),e("a-menu-item",{key:"edit"},[e("a-icon",{attrs:{type:"edit"}}),t._v("连接管理")],1)],1)],1)],1)],1)],1)],1)],1),e("a-layout-content",{staticStyle:{padding:"0 50px",height:"92vh"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"redis_monitor"==t.memu_key,expression:"memu_key=='redis_monitor'"}]},[e("a-row",[e("a-col",{attrs:{span:12}},[e("div",{ref:"chart",staticStyle:{height:"46vh",width:"48vw"}})]),e("a-col",{attrs:{span:12}},[e("div",{ref:"chart1",staticStyle:{height:"46vh",width:"48vw"}})])],1),e("a-row",[e("a-col",{attrs:{span:12}},[e("div",{ref:"chart2",staticStyle:{height:"46vh",width:"48vw"}})]),e("a-col",{attrs:{span:12}},[e("div",{ref:"chart3",staticStyle:{height:"46vh",width:"48vw"}})])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"redis_info"==t.memu_key,expression:"memu_key=='redis_info'"}]},[e("RedisInfo",{attrs:{redis_ip:t.redis_ip,info_data:t.info_data,clients_loading:t.clients_loading,clients_data:t.clients_data,logs_loading:t.logs_loading,logs_data:t.logs_data}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"redis_pubsub"==t.memu_key,expression:"memu_key=='redis_pubsub'"}]},[e("a-row",{staticStyle:{"padding-top":"10px"}},[e("a-col",{staticStyle:{"padding-right":"10px"},attrs:{span:16}},[e("div",{staticClass:"redis-output-container"},[e("a-list",{attrs:{bordered:"",dataSource:t.redis_output[t.redis_ip]},scopedSlots:t._u([{key:"renderItem",fn:function(s,a){return e("a-list-item",{},[e("a-list-item-meta",{attrs:{description:s[1]}},[e("a",{attrs:{slot:"title"},slot:"title"},[t._v("接收通道: "+t._s(s[0]))])]),e("div",{attrs:{slot:"actions"},slot:"actions"},[e("a-tag",{attrs:{color:"blue"},on:{click:function(e){return t.format_json(s[1])}}},[t._v("JSON")]),e("a-tag",{attrs:{color:"red"},on:{click:function(s){return t.delete_pubsub_output(a)}}},[t._v("X")])],1)],1)}}])},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("Redis输出信息:")])])],1)]),e("a-col",{staticStyle:{"padding-top":"8px"},attrs:{span:8}},[e("a-input",{staticStyle:{"margin-bottom":"8px"},attrs:{placeholder:"发布/订阅的Channel"},model:{value:t.pubsub_key,callback:function(s){t.pubsub_key=s},expression:"pubsub_key"}}),e("a-textarea",{staticStyle:{"margin-bottom":"8px"},attrs:{rows:10,placeholder:t.pubsub_msg_placeholder},model:{value:t.pubsub_msg,callback:function(s){t.pubsub_msg=s},expression:"pubsub_msg"}}),e("a-button",{staticStyle:{background:"#108ee9","border-color":"#108ee9"},attrs:{type:"primary"},on:{click:t.publish_msg}},[t._v("发布")]),e("a-button",{staticStyle:{background:"#87d068","border-color":"#87d068","margin-left":"5px"},attrs:{type:"primary"},on:{click:t.subscribe_msg}},[t._v("订阅")]),e("a-divider",[t._v("发布列表")]),e("div",{staticStyle:{"line-height":"2"}},[t._l(t.publish_keys[t.redis_ip],(function(s){return[s.length>80?e("a-tooltip",{key:s,attrs:{title:s}},[e("a-tag",{key:s,attrs:{color:"#108ee9",closable:!0,afterClose:function(){return t.handlePubClose(s)}},on:{click:function(e){return t.copyPublishMsg(s)}}},[t._v("\n                      "+t._s(s.slice(0,80)+"...")+"\n                    ")])],1):e("a-tag",{key:s,attrs:{color:"#108ee9",closable:!0,afterClose:function(){return t.handlePubClose(s)}},on:{click:function(e){return t.copyPublishMsg(s)}}},[t._v("\n                    "+t._s(s)+"\n                  ")]),t._v("  \n                ")]}))],2),e("a-divider",[t._v("订阅列表")]),e("div",{staticStyle:{"line-height":"2"}},[t._l(t.subscribe_keys[t.redis_ip],(function(s){return[s.length>80?e("a-tooltip",{key:s,attrs:{title:s}},[e("a-tag",{key:s,attrs:{color:"#87d068",closable:!0,afterClose:function(){return t.handleTagClose(s)}},on:{click:function(){t.pubsub_key=s}}},[t._v("\n                      "+t._s(s.slice(0,80)+"...")+"\n                    ")])],1):e("a-tag",{key:s,attrs:{color:"#87d068",closable:!0,afterClose:function(){return t.handleTagClose(s)}},on:{click:function(){t.pubsub_key=s}}},[t._v("\n                    "+t._s(s)+"\n                  ")])]})),t._l(t.subscribe_keys_history[t.redis_ip],(function(s){return[s.length>80?e("a-tooltip",{key:s,attrs:{title:s}},[e("a-tag",{key:s,attrs:{color:"darkgrey",closable:!0,afterClose:function(){return t.handleTagHisClose(s)}},on:{click:function(){t.pubsub_key=s}}},[t._v("\n                      "+t._s(s.slice(0,80)+"...")+"\n                    ")])],1):e("a-tag",{key:s,attrs:{color:"darkgrey",closable:!0,afterClose:function(){return t.handleTagHisClose(s)}},on:{click:function(){t.pubsub_key=s}}},[t._v("\n                    "+t._s(s)+"\n                  ")])]}))],2)],1)],1)],1)])],1),e("a-button",{staticClass:"command-botton",attrs:{shape:"circle",icon:"thunderbolt",size:"large"},on:{click:function(){t.command_visible=!0}}}),e("a-drawer",{attrs:{width:"560",placement:"right",visible:t.visible},on:{close:function(){t.visible=!1}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Redis连接管理 "),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{staticStyle:{color:"#42b983"},attrs:{icon:"plus"},on:{click:t.add_container}},[t._v("添加连接")])],1),e("a-card",t._l(t.containers,(function(s,a){return e("a-card-grid",{key:a,staticClass:"gridcard100"},[t._v("\n          名称: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(s.name))]),e("a-divider",{attrs:{type:"vertical"}}),t._v("\n          IP: "),e("a-tag",{attrs:{color:"blue"}},[t._v(t._s(s.ip))]),e("a-divider",{attrs:{type:"vertical"}}),t._v("\n          端口: "+t._s(s.port)+" "),e("a-divider",{attrs:{type:"vertical"}}),t._v("\n          DB: "+t._s(s.db)+" "),e("br"),e("br"),t._v("\n          密码: "+t._s(s.password)+" "),e("a-divider",{attrs:{type:"vertical"}}),e("a-button",{attrs:{shape:"circle",icon:"edit"},on:{click:function(e){return t.edit_container(s)}}}),e("a-button",{attrs:{shape:"circle",icon:"delete",type:"danger"},on:{click:function(e){return t.delete_container(s.ip)}}})],1)})),1)],1),e("a-drawer",{attrs:{title:t.children_drawl_name,width:"280",visible:t.visible_children},on:{close:function(){t.visible_children=!1}}},["修改连接"==t.children_drawl_name?e("a-input",{attrs:{placeholder:"连接IP",size:"large",disabled:""},model:{value:t.container_tmp.ip,callback:function(s){t.$set(t.container_tmp,"ip",s)},expression:"container_tmp.ip"}},[e("a-icon",{attrs:{slot:"prefix",type:"api"},slot:"prefix"}),t.container_tmp.ip?e("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.ip=""}},slot:"suffix"}):t._e()],1):e("a-input",{attrs:{placeholder:"连接IP",size:"large"},on:{change:function(){t.container_tmp.name=t.container_tmp.ip}},model:{value:t.container_tmp.ip,callback:function(s){t.$set(t.container_tmp,"ip",s)},expression:"container_tmp.ip"}},[e("a-icon",{attrs:{slot:"prefix",type:"api"},slot:"prefix"}),t.container_tmp.ip?e("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.ip=""}},slot:"suffix"}):t._e()],1),e("a-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"连接名称",size:"large"},model:{value:t.container_tmp.name,callback:function(s){t.$set(t.container_tmp,"name",s)},expression:"container_tmp.name"}},[e("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"}),t.container_tmp.name?e("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.name=""}},slot:"suffix"}):t._e()],1),e("a-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"密码",size:"large"},model:{value:t.container_tmp.password,callback:function(s){t.$set(t.container_tmp,"password",s)},expression:"container_tmp.password"}},[e("a-icon",{attrs:{slot:"prefix",type:"warning"},slot:"prefix"}),t.container_tmp.password?e("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.password=""}},slot:"suffix"}):t._e()],1),e("a-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"端口",size:"large"},model:{value:t.container_tmp.port,callback:function(s){t.$set(t.container_tmp,"port",s)},expression:"container_tmp.port"}},[e("a-icon",{attrs:{slot:"prefix",type:"appstore"},slot:"prefix"}),t.container_tmp.port?e("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.port=""}},slot:"suffix"}):t._e()],1),e("a-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"DB",size:"large"},model:{value:t.container_tmp.db,callback:function(s){t.$set(t.container_tmp,"db",s)},expression:"container_tmp.db"}},[e("a-icon",{attrs:{slot:"prefix",type:"hdd"},slot:"prefix"}),t.container_tmp.db?e("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.db=""}},slot:"suffix"}):t._e()],1),"修改连接"==t.children_drawl_name?e("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",loading:t.visible_children_loading},on:{click:t.upload_edit}},[t._v("确认")]):e("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",loading:t.visible_children_loading},on:{click:t.upload_add}},[t._v("确认")])],1),e("a-drawer",{attrs:{height:"500",placement:"bottom",visible:t.command_visible},on:{close:function(){t.command_visible=!1}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Redis终端 (请不要执行带阻塞性质的命令 例如: BLPOP, SUBSCRIBE)")]),e("a-textarea",{staticStyle:{background:"silver","word-break":"break-all"},attrs:{id:"redis_command_output",placeholder:"Redis命令输出",rows:16},model:{value:t.redis_command_output,callback:function(s){t.redis_command_output=s},expression:"redis_command_output"}}),e("a-input-search",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"请输入执行的命令"},on:{search:t.execute_command},model:{value:t.redis_command,callback:function(s){t.redis_command=s},expression:"redis_command"}},[e("a-button",{attrs:{slot:"enterButton",type:"primary"},slot:"enterButton"},[t._v("执行")])],1)],1),e("a-modal",{attrs:{footer:null,destroyOnClose:!0,width:"50vw"},model:{value:t.showJson,callback:function(s){t.showJson=s},expression:"showJson"}},[e("json-view",{staticStyle:{"margin-top":"20px",overflow:"auto","max-height":"72vh"},attrs:{data:t.jsonData}})],1),e("a-modal",{attrs:{footer:null},model:{value:t.showUpdate,callback:function(s){t.showUpdate=s},expression:"showUpdate"}},[t.updateFlag?e("div",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{staticStyle:{color:"orange","font-size":"22px"},attrs:{type:"info-circle"}}),t._v(" 可以升级的版本如下, 下载后请替换本程序")],1):e("div",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{staticStyle:{color:"lightgreen","font-size":"22px"},attrs:{type:"check-circle"}}),t._v(" 您目前使用的版本是最新的, 无需更新!")],1),e("a-list",{attrs:{itemLayout:"horizontal",dataSource:t.updateVersion},scopedSlots:t._u([{key:"renderItem",fn:function(s){return e("a-list-item",{},[e("a-list-item-meta",[e("a",{attrs:{slot:"title",href:s},slot:"title"},[t._v(t._s(s))])])],1)}}])})],1),e("About",{ref:"about",attrs:{about_flag:t.aboutFlag}})],1)}),o=[],n=e("bc3a"),d=e.n(n),c=e("313e"),l=e.n(c),_=e("c1df"),p=e.n(_),u=e("1b37"),h=e.n(u),m=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("a-row",[e("a-col",{staticStyle:{"padding-right":"10px"},attrs:{span:16}},[e("a-divider",[t._v("高时延日志")]),e("a-table",{staticStyle:{"word-break":"break-all"},attrs:{rowKey:"id",columns:t.logs_columns,loading:t.logs_loading,dataSource:t.logs_data,pagination:!1,scroll:{y:310}},scopedSlots:t._u([{key:"time",fn:function(s){return[t._v("\n          "+t._s(t.moment(1e3*s).format("YYYY-MM-DD HH:mm:ss"))+"\n        ")]}}])}),e("a-divider",[t._v("客户端列表")]),e("a-table",{attrs:{rowKey:"id",columns:t.clients_columns,loading:t.clients_loading,dataSource:t.clients_data,pagination:{pageSize:50},scroll:{y:268}},scopedSlots:t._u([{key:"time",fn:function(s){return[t._v("\n          "+t._s(t.formatSeconds(s))+"\n        ")]}}])})],1),e("a-col",{attrs:{span:8}},[e("a-collapse",{staticStyle:{"font-size":"15px"},attrs:{accordion:"",activeKey:"1"}},[e("a-collapse-panel",{key:"1"},[e("template",{slot:"header"},[e("a-icon",{attrs:{type:"home"}}),t._v(" 服务端信息 | "+t._s(t.redis_ip))],1),e("a-card",[e("a-card-grid",{staticClass:"gridcard"},[t._v("版本信息: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.redis_version)+" | "+t._s(t.info_data.arch_bits))])],1),e("a-card-grid",{staticClass:"gridcard"},[t._v("PID | PORT: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.process_id)+" | "+t._s(t.info_data.tcp_port))])],1),e("a-card-grid",{staticClass:"gridcard"},[t._v("服务模式: "+t._s(t.info_data.redis_mode))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("运行时间: "+t._s(t.formatSeconds(t.info_data.uptime_in_seconds)))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("执行文件: "+t._s(t.info_data.executable))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("配置文件: "+t._s(t.info_data.config_file)+" "),e("a-icon",{staticStyle:{"font-size":"16px",color:"cornflowerblue"},attrs:{type:"info-circle"},on:{click:t.get_config}})],1),e("a-card-grid",{staticClass:"gridcard"},[t._v("系统版本: "+t._s(t.info_data.os))])],1)],2),e("a-collapse-panel",{key:"2"},[e("template",{slot:"header"},[e("a-icon",{attrs:{type:"user"}}),t._v(" 客户端信息")],1),e("a-card",[e("a-card-grid",{staticClass:"gridcard"},[t._v("已连接客户端的数量: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.connected_clients))])],1),e("a-card-grid",{staticClass:"gridcard"},[t._v("阻塞的客户端的数量: "),e("a-tag",{attrs:{color:"orange"}},[t._v(t._s(t.info_data.blocked_clients))])],1)],1)],2),e("a-collapse-panel",{key:"3"},[e("template",{slot:"header"},[e("a-icon",{attrs:{type:"bar-chart"}}),t._v(" 统计信息")],1),e("a-card",[e("a-card-grid",{staticClass:"gridcard"},[t._v("已接受的连接请求数量: "+t._s(t.info_data.total_connections_received))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("已执行的命令数量: "+t._s(t.info_data.total_commands_processed))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("总流入数据量: "+t._s(t.info_data.total_net_input_bytes))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("总流出数据量: "+t._s(t.info_data.total_net_output_bytes))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("每秒流入数据量: "+t._s(t.info_data.instantaneous_input_kbps))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("每秒流出数据量: "+t._s(t.info_data.instantaneous_output_kbps))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("每秒执行命令数量: "+t._s(t.info_data.instantaneous_ops_per_sec))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("过期删除的键: "+t._s(t.info_data.expired_keys))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("驱逐(evict)的键数量: "+t._s(t.info_data.evicted_keys))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("查找数据库键成功的次数: "+t._s(t.info_data.keyspace_hits))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("订阅的频道数量: "+t._s(t.info_data.pubsub_channels))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("订阅的模式数量: "+t._s(t.info_data.pubsub_patterns))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("拒绝的连接请求数量: "+t._s(t.info_data.rejected_connections))])],1)],2),e("a-collapse-panel",{key:"4"},[e("template",{slot:"header"},[e("a-icon",{attrs:{type:"hdd"}}),t._v(" 持久信息")],1),e("a-card",[e("a-card-grid",{staticClass:"gridcard"},[t._v("AOF是否处于打开状态: "+t._s(t.info_data.aof_enabled))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("AOF文件目前的大小: "+t._s(t.info_data.aof_current_size))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("RDB文件最近保存时间: "),e("br"),t._v(" "+t._s(t.moment(1e3*t.info_data.rdb_last_save_time).format("YYYY-MM-DD HH:mm:ss")))])],1)],2),e("a-collapse-panel",{key:"5"},[e("template",{slot:"header"},[e("a-icon",{attrs:{type:"table"}}),t._v(" 内存信息")],1),e("a-card",[e("a-card-grid",{staticClass:"gridcard"},[t._v("系统内存: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.total_system_memory_human))])],1),e("a-card-grid",{staticClass:"gridcard"},[t._v("占用内存: "),e("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.info_data.used_memory_human))])],1),e("a-card-grid",{staticClass:"gridcard"},[t._v("系统内存占用: "+t._s(t.info_data.used_memory_rss_human))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("内存消耗峰值: "+t._s(t.info_data.used_memory_peak_human))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("内存碎片率: "+t._s(t.info_data.mem_fragmentation_ratio))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("内存分配器: "+t._s(t.info_data.mem_allocator))])],1)],2),e("a-collapse-panel",{key:"6"},[e("template",{slot:"header"},[e("a-icon",{attrs:{type:"laptop"}}),t._v(" 处理器信息")],1),e("a-card",[e("a-card-grid",{staticClass:"gridcard"},[t._v("系统CPU: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.used_cpu_sys))])],1),e("a-card-grid",{staticClass:"gridcard"},[t._v("用户CPU: "),e("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.info_data.used_cpu_user))])],1),e("a-card-grid",{staticClass:"gridcard"},[t._v("后台进程系统CPU: "+t._s(t.info_data.used_cpu_sys_children))]),e("a-card-grid",{staticClass:"gridcard"},[t._v("后台进程用户CPU: "+t._s(t.info_data.used_cpu_user_children))])],1)],2),e("a-collapse-panel",{key:"7"},[e("template",{slot:"header"},[e("a-icon",{attrs:{type:"database"}}),t._v(" 键值信息")],1),e("a-card",[t.format_db_nums(t.info_data.db0)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB0: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db0)))])],1):t._e(),t.format_db_nums(t.info_data.db1)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB1: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db1)))])],1):t._e(),t.format_db_nums(t.info_data.db2)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB2: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db2)))])],1):t._e(),t.format_db_nums(t.info_data.db3)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB3: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db3)))])],1):t._e(),t.format_db_nums(t.info_data.db4)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB4: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db4)))])],1):t._e(),t.format_db_nums(t.info_data.db5)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB5: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db5)))])],1):t._e(),t.format_db_nums(t.info_data.db6)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB6: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db6)))])],1):t._e(),t.format_db_nums(t.info_data.db7)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB7: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db7)))])],1):t._e(),t.format_db_nums(t.info_data.db8)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB8: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db8)))])],1):t._e(),t.format_db_nums(t.info_data.db9)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB9: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db9)))])],1):t._e(),t.format_db_nums(t.info_data.db10)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB10: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db10)))])],1):t._e(),t.format_db_nums(t.info_data.db11)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB11: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db11)))])],1):t._e(),t.format_db_nums(t.info_data.db12)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB12: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db12)))])],1):t._e(),t.format_db_nums(t.info_data.db13)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB13: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db13)))])],1):t._e(),t.format_db_nums(t.info_data.db14)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB14: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db14)))])],1):t._e(),t.format_db_nums(t.info_data.db15)>0?e("a-card-grid",{staticClass:"gridcard25"},[t._v("DB15: "),e("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db15)))])],1):t._e()],1)],2)],1)],1)],1),e("a-drawer",{attrs:{width:"560",placement:"right",visible:t.showConfig},on:{close:function(){t.showConfig=!1}}},[e("div",{attrs:{slot:"title"},slot:"title"},[t._v("Redis配置详情")]),e("a-list",{staticStyle:{"max-height":"88vh",overflow:"auto"},attrs:{bordered:"",dataSource:t.configData},scopedSlots:t._u([{key:"renderItem",fn:function(s){return e("a-list-item",{},[e("a",{attrs:{slot:"actions"},slot:"actions"},[t._v(t._s(s.value))]),t._v("\n        "+t._s(s.key)+"\n      ")])}}])})],1)],1)},b=[];const f="http:"===location.protocol?"ws:":"wss:";let g="47.52.140.130:8080",y="127.0.0.1:51299",v={local:{base_url:`http://${y}`,ws_url:`ws://${y}/ws`},dev:{base_url:`http://${g}`,ws_url:`ws://${g}/ws`},prod:{base_url:location.origin,ws_url:`${f}//${location.host}/ws`}},k="prod";var j={base_url:v[k].base_url,ws_url:v[k].ws_url},w={name:"RedisInfo",props:{redis_ip:String,info_data:Object,logs_loading:Boolean,clients_loading:Boolean,logs_data:Array,clients_data:Array},data(){return{url:j.base_url,moment:p.a,showConfig:!1,configData:[],logs_columns:[{title:"ID",dataIndex:"id",width:100},{title:"记录时间",dataIndex:"time",width:200,scopedSlots:{customRender:"time"}},{title:"执行时间(微秒)",dataIndex:"time_used",width:150},{title:"日志详情",dataIndex:"msg"}],clients_columns:[{title:"ID",dataIndex:"id",width:150},{title:"主机",dataIndex:"addr",width:200},{title:"连接时长",dataIndex:"age",scopedSlots:{customRender:"time"},width:150},{title:"数据库ID",dataIndex:"db",width:150},{title:"订阅频道",dataIndex:"sub",width:150},{title:"最近执行",dataIndex:"cmd",width:150}]}},methods:{get_config(){this.showConfig=!0,this.configData=[];let t="config get *";d.a.get(this.url+`/containers?method=execute&ip=${this.redis_ip}&command=${t}`).then(t=>{let s=t.data.code;if(0==s){let s=t.data.data;for(let t=0;t<s.length;t+=2)if("client-output-buffer-limit"===s[t]){let e=s[t+1].split(" ");this.configData.push({key:`${s[t]}-${e[0]}`,value:`${e[1]} ${e[2]} ${e[3]}`}),this.configData.push({key:`${s[t]}-${e[4]}`,value:`${e[5]} ${e[6]} ${e[7]}`}),this.configData.push({key:`${s[t]}-${e[8]}`,value:`${e[9]} ${e[10]} ${e[11]}`})}else this.configData.push({key:s[t],value:s[t+1]})}})},format_db_nums(t){if(void 0===t)return 0;if(""===t)return 0;let s=t.split(",")[0];return s.split("=")[1]},formatSeconds(t){var s=parseInt(t),e=0,a=0;s>60&&(e=parseInt(s/60),s=parseInt(s%60),e>60&&(a=parseInt(e/60),e=parseInt(e%60)));var i=parseInt(s)+"秒";return e>0&&(i=parseInt(e)+"分"+i),a>0&&(i=parseInt(a)+"小时"+i),i}}},x=w,C=e("2877"),$=Object(C["a"])(x,m,b,!1,null,"ceba0e8a",null),S=$.exports,I=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("a-modal",{attrs:{width:"420px",footer:null},model:{value:t.about_flag,callback:function(s){t.about_flag=s},expression:"about_flag"}},[e("div",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{staticStyle:{color:"lightgreen","font-size":"22px"},attrs:{type:"check-circle"}}),t._v(" "+t._s(t.version))],1),e("div",{staticStyle:{"text-align":"center"}},[e("img",{staticStyle:{width:"50%"},attrs:{src:t.pic_src}}),e("p",[t._v("您正在使用免费开源的 "),e("a-tag",{attrs:{color:"green"}},[t._v("RedisGo")])],1),e("p",[t._v("可以扫码关注 "),e("a-tag",{attrs:{color:"red"}},[t._v("公众号")]),t._v("获得最新的消息")],1),e("p",[t._v("如果觉得好用，不妨在  "),e("a",{attrs:{target:"_blank",href:"https://github.com/liuzhuoling2011/RedisGo"}},[e("a-icon",{attrs:{type:"github"}}),t._v("Github")],1),t._v(" 给个 "),e("a-icon",{staticStyle:{color:"sandybrown"},attrs:{type:"star",theme:"filled"}})],1),e("p",[t._v("良好的关注度和参与度有助于开源项目的长远发展~")])])])],1)},D=[],O={name:"RedisInfo",data(){return{version:"RedisGo Web V1.1.2",about_flag:!1,pic_src:"http://qiniu.zoranjojo.top/zoranjojo.jpg"}},methods:{showAbout(){this.about_flag=!0}}},z=O,A=Object(C["a"])(z,I,D,!1,null,"a54fcae2",null),B=A.exports,P={name:"app",components:{jsonView:h.a,RedisInfo:S,About:B},data(){return{log:console.log,moment:p.a,url:j.base_url,ws_url:j.ws_url,redis_name:"",redis_ip:"",redis_db:0,containers:{},container_tmp:{ip:"",name:"",password:"",port:6379,db:0,status:0},dbs:[],visible:!1,visible_children:!1,visible_children_loading:!1,children_drawl_name:"新增连接",memu_key:"",subscribe_keys:{},subscribe_keys_history:{},subscribe_keys_flag:{},publish_keys:{},pubsub_key:"",pubsub_msg:"",pubsub_msg_placeholder:'需要发布的信息, 可以直接放上可读的Json, 例如:\n{\n  "ABC": [\n    "123456",\n    "234567",\n    "345678",\n  ],\n  "DEF": ["567890"]\n}',redis_output:{},redis_command:"",redis_command_output:"",command_visible:!1,aboutFlag:!1,updateFlag:!1,updateVersion:[],showUpdate:!1,time_data:{},info_data:{},info_data_map:{},info_data_flags:{},logs_loading:!1,logs_data:[],clients_loading:!1,clients_data:[],websocket:null,websocket_ping:null,info_input_kbps:{},info_output_kbps:{},info_used_memory:{},info_ops_per_sec:{},info_used_cpu_user:{},jsonData:"",showJson:!1,myChart:null,myChart1:null,myChart2:null,myChart3:null,option:{title:{text:"流量监控"},tooltip:{trigger:"axis",axisPointer:{animation:!1}},axisPointer:{link:{xAxisIndex:"all"}},grid:[{left:50,right:50,height:"32%"},{left:50,right:50,top:"60%",height:"32%"}],xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:[]},{gridIndex:1,type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:[],position:"top"}],yAxis:[{name:"上行流量(Kbps/s)",type:"value"},{gridIndex:1,name:"下行流量(Kbps/s)",type:"value",inverse:!0}],series:[{name:"上行流量",type:"line",symbolSize:8,hoverAnimation:!1,data:[]},{name:"下行流量",type:"line",xAxisIndex:1,yAxisIndex:1,symbolSize:8,hoverAnimation:!1,data:[]}]},option1:{title:{text:"内存监控"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{name:"内存占用(KB)",type:"value"},grid:{left:0,right:0,bottom:0,containLabel:!0},series:[{data:[],type:"line",smooth:!0}]},option2:{title:{text:"每秒执行操作数"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},grid:{left:20,right:20,containLabel:!0},series:[{data:[],type:"line",smooth:!0}]},option3:{title:{text:"CPU监控"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},grid:{left:20,right:20,containLabel:!0},series:[{data:[],type:"line",smooth:!0}]}}},methods:{menuClick(t){this.memu_key=t.key,"redis_info"===this.memu_key?this.get_redis_infos():"redis_monitor"===this.memu_key?this.websocket_get_redis_info():this.memu_key},settingClick(t){"about"===t.key?this.$refs.about.showAbout():"update"===t.key?this.showUpdate=!0:"edit"===t.key&&(this.visible=!0)},reconnect_websocket(){let t=new WebSocket(this.ws_url);t.onopen=()=>{this.log("WebSocket连接成功"),this.websocket_ping=setInterval(this.send_websocket_msg,6e4)},t.onerror=()=>this.$message.error("WebSocket连接发生错误, 请刷新页面"),t.onclose=t=>{this.log(`WebSocket连接关闭 (${t.data})`),this.websocket=null,clearTimeout(this.websocket_ping),this.websocket_ping=null},t.onmessage=t=>this.receiveData(t),this.websocket=t},send_websocket_msg(t={type:0}){this.websocket.send(JSON.stringify(t))},websocket_get_redis_info(){void 0===this.info_data_flags[this.redis_ip]&&(this.send_websocket_msg({type:1,ip:this.redis_ip}),this.info_data_flags[this.redis_ip]=!0)},change_redis(t){this.redis_ip=t,"redis_monitor"===this.memu_key?this.websocket_get_redis_info():"redis_info"===this.memu_key&&this.get_redis_infos()},get_redis_infos(){this.get_info(),this.get_logs(),this.get_clients()},get_info(){d.a.get(this.url+"/containers?method=info&ip="+this.redis_ip).then(t=>{this.info_data_map[this.redis_ip]=t.data.data,this.info_data=t.data.data})},get_logs(){this.logs_loading=!0,d.a.get(this.url+"/containers?method=logs&ip="+this.redis_ip).then(t=>{this.logs_data=t.data.data,this.logs_loading=!1})},get_clients(){this.clients_loading=!0,d.a.get(this.url+"/containers?method=clients&ip="+this.redis_ip).then(t=>{this.clients_data=t.data.data,this.clients_loading=!1})},format_json(t){try{"object"==typeof JSON.parse(t)?(this.jsonData=JSON.parse(t),this.showJson=!0):this.$message.error("不支持该类型数据的JSON展示")}catch(s){this.$message.error("不支持该类型数据的JSON展示")}},delete_pubsub_output(t){this.$delete(this.redis_output[this.redis_ip],t)},publish_msg(){""!=this.redis_ip?""!=this.pubsub_key?d.a.get(this.url+`/containers?method=publish&ip=${this.redis_ip}&key=${encodeURIComponent(this.pubsub_key)}&msg=${encodeURIComponent(this.pubsub_msg)}`).then(t=>{let s=t.data;0!=s.code?this.$message.error(s.msg):(this.$message.success("Publish成功"),void 0===this.publish_keys[this.redis_ip]&&this.$set(this.publish_keys,this.redis_ip,[]),-1===this.publish_keys[this.redis_ip].indexOf(s.msg+" | "+s.data)&&(this.publish_keys[this.redis_ip].push(s.msg+" | "+s.data),localStorage.setItem("publish_keys",JSON.stringify(this.publish_keys))))}):this.$message.error("请输入Channel再试"):this.$message.error("未检测到有效的Redis连接, 请在设置中添加",10)},subscribe_msg(){""!=this.redis_ip?""!=this.pubsub_key?(void 0===this.subscribe_keys_flag[this.redis_ip]&&this.$set(this.subscribe_keys_flag,this.redis_ip,{}),void 0===this.subscribe_keys_flag[this.redis_ip][this.pubsub_key]?(this.send_websocket_msg({type:2,ip:this.redis_ip,channel:this.pubsub_key,command:"open"}),this.$set(this.subscribe_keys_flag[this.redis_ip],this.pubsub_key,!0)):this.$message.error(`已经订阅 ${this.pubsub_key}, 无需重复订阅`)):this.$message.error("请输入Channel再试"):this.$message.error("未检测到有效的Redis连接, 请在设置中添加并刷新页面",10)},upload_add(){this.visible_children_loading=!0,d.a.get(this.url+`/containers?method=add&ip=${this.container_tmp.ip}&name=${this.container_tmp.name}&password=${this.container_tmp.password}&port=${this.container_tmp.port}&db=${this.container_tmp.db}`).then(t=>{this.visible_children_loading=!1;let s=t.data;0!=s.code?this.$message.error(s.msg):(this.$set(this.containers,this.container_tmp.ip,s.data),this.$message.success("添加成功"),this.visible_children=!1,1===Object.keys(this.containers).length&&(this.redis_ip=this.container_tmp.ip,this.redis_name=this.container_tmp.name,this.menuClick({key:"redis_info"})))})},upload_edit(){this.visible_children_loading=!0,d.a.get(this.url+`/containers?method=edit&ip=${this.container_tmp.ip}&name=${this.container_tmp.name}&password=${this.container_tmp.password}&port=${this.container_tmp.port}&db=${this.container_tmp.db}`).then(t=>{this.visible_children_loading=!1;let s=t.data;0!=s.code?this.$message.error(s.msg):(this.$set(this.containers,this.container_tmp.ip,s.data),this.$message.success("修改成功"),this.visible_children=!1)})},add_container(){this.visible_children=!0,this.children_drawl_name="新增连接",this.container_tmp.ip="",this.container_tmp.password="",this.container_tmp.name="",this.container_tmp.port=6379,this.container_tmp.db=0},edit_container(t){this.visible_children=!0,this.children_drawl_name="修改连接",this.container_tmp.ip=t.ip,this.container_tmp.password=t.password,this.container_tmp.name=t.name,this.container_tmp.port=t.port,this.container_tmp.db=t.db},delete_container(t){d.a.get(this.url+"/containers?method=delete&ip="+t).then(s=>{let e=s.data.code;if(0==e){if(this.$message.success("成功删除Redis连接"),t===this.redis_ip){let s=!1;for(let e in this.containers)if(this.containers[e].ip!==t){this.redis_ip=this.containers[e].ip,s=!0;break}s||this.$message.error("未检测到有效的Redis连接, 请在右上角的设置中添加",10)}this.$delete(this.containers,t)}})},execute_command(){d.a.get(this.url+`/containers?method=execute&ip=${this.redis_ip}&command=${this.redis_command}`).then(t=>{let s=t.data.code;if(0==s){let s=t.data.data;Array.isArray(s)&&(s=s.join(", ")),this.redis_command_output+=`${p()().format("YYYY-MM-DD HH:mm:ss")}\t${s}\n`;const e=document.getElementById("redis_command_output");e.scrollTop=e.scrollHeight}})},circle_push(t,s,e=36e3){return void 0===t&&(t=[]),t.push(s),t.length>e&&t.shift(),t},process_info_data(t){const s=t.msg,e=JSON.parse(t.data);this.info_data_map[s]=e,this.info_data=e,this.time_data[s]=this.circle_push(this.time_data[s],p()().format("HH:mm:ss")),this.info_input_kbps[s]=this.circle_push(this.info_input_kbps[s],e["instantaneous_input_kbps"]),this.info_output_kbps[s]=this.circle_push(this.info_output_kbps[s],e["instantaneous_output_kbps"]),this.info_used_memory[s]=this.circle_push(this.info_used_memory[s],e["used_memory"]/1024),this.info_ops_per_sec[s]=this.circle_push(this.info_ops_per_sec[s],e["instantaneous_ops_per_sec"]),this.info_used_cpu_user[s]=this.circle_push(this.info_used_cpu_user[s],e["used_cpu_user"]),this.updateCharts()},receiveData(t){const s=JSON.parse(t.data);if(0!=s.type)if(1==s.type)this.process_info_data(s);else if(2==s.type){if(0==s.status)return this.$message.success(`${s.msg} 订阅成功`),void 0===this.subscribe_keys[this.redis_ip]&&this.$set(this.subscribe_keys,this.redis_ip,[]),-1===this.subscribe_keys[this.redis_ip].indexOf(this.pubsub_key)&&this.subscribe_keys[this.redis_ip].push(this.pubsub_key),void this.handleTagHisClose(s.msg);if(-1==s.status){let t=s.msg;this.$message.success(`${t} 取消订阅成功`);const e=this.subscribe_keys[t].filter(t=>t!==s.data);return void this.$set(this.subscribe_keys,t,e)}this.$set(this.redis_output,this.redis_ip,this.circle_push(this.redis_output[this.redis_ip],[s.msg,s.data]))}},copyPublishMsg(t){let s=t.split(" | ");this.pubsub_key=s[0],this.pubsub_msg=s[1]},handlePubClose(t){const s=this.publish_keys[this.redis_ip].filter(s=>s!==t);this.$set(this.publish_keys,this.redis_ip,s)},handleTagClose(t){this.subscribe_keys_flag[this.redis_ip][t]&&(this.send_websocket_msg({type:2,ip:this.redis_ip,channel:t,command:"close"}),delete this.subscribe_keys_flag[this.redis_ip][t])},handleTagHisClose(t){const s=this.subscribe_keys_history[this.redis_ip].filter(s=>s!==t);this.$set(this.subscribe_keys_history,this.redis_ip,s)},updateCharts(){this.option.xAxis[0].data=this.time_data[this.redis_ip],this.option.xAxis[1].data=this.time_data[this.redis_ip],this.option.series[0].data=this.info_input_kbps[this.redis_ip],this.option.series[1].data=this.info_output_kbps[this.redis_ip],this.myChart.setOption(this.option),this.option1.xAxis.data=this.time_data[this.redis_ip],this.option1.series[0].data=this.info_used_memory[this.redis_ip],this.myChart1.setOption(this.option1),this.option2.xAxis.data=this.time_data[this.redis_ip],this.option2.series[0].data=this.info_ops_per_sec[this.redis_ip],this.myChart2.setOption(this.option2),this.option3.xAxis.data=this.time_data[this.redis_ip],this.option3.series[0].data=this.info_used_cpu_user[this.redis_ip],this.myChart3.setOption(this.option3)},onDestroy(){null!==this.websocket_ping&&clearTimeout(this.websocket_ping);let t=this.subscribe_keys;for(let s in this.subscribe_keys_history)for(let e in this.subscribe_keys_history[s]){let a=this.subscribe_keys_history[s][e];void 0===t[s]&&(t[s]=[],t[s].push(a)),-1===t[s].indexOf(a)&&t[s].push(a)}localStorage.setItem("subscribe_keys",JSON.stringify(t))}},created(){for(let t=0;t<16;t++)this.dbs.push({label:t,value:t});d.a.get(this.url+"/containers?method=list").then(t=>{let s=t.data.data;for(let e in s)""===this.redis_ip&&(this.redis_ip=s[e]["ip"],this.redis_name=s[e]["name"]);""===this.redis_ip?this.$message.error("未检测到有效的Redis连接, 请在右上角的设置中添加",10):(this.containers=s,this.menuClick({key:"redis_info"}))}),d.a.get(this.url+"/system?method=update").then(t=>{if(this.updateVersion=JSON.parse(t.data.data).data.filename,this.updateVersion.length>1){this.updateFlag=!0,this.updateVersion.shift();for(let t=0;t<this.updateVersion.length;t++)this.updateVersion[t]=`http://${this.updateVersion[t]}`;this.updateVersion.reverse()}else this.updateVersion=[]}),d.a.get(this.url+"/system?method=notice").then(t=>{let s="redisgo_notice_time";this.notices=JSON.parse(t.data.data).data;for(let e=0;e<this.notices.length;e++)(null==localStorage[s]||localStorage[s]<this.notices[e].CreatedAt)&&(localStorage.setItem(s,this.notices[e].CreatedAt),this.$notification["success"]({top:80,duration:10,message:"温馨提示",description:this.notices[e].Msg}))}),this.reconnect_websocket(),window.onbeforeunload=this.onDestroy},mounted(){this.myChart=l.a.init(this.$refs.chart),this.myChart1=l.a.init(this.$refs.chart1),this.myChart2=l.a.init(this.$refs.chart2),this.myChart3=l.a.init(this.$refs.chart3),this.updateCharts();let t=localStorage.getItem("publish_keys");null!==t&&(this.publish_keys=JSON.parse(t));let s=localStorage.getItem("subscribe_keys");null!==s&&(this.subscribe_keys_history=JSON.parse(s))}},R=P,J=(e("034f"),Object(C["a"])(R,r,o,!1,null,null,null)),N=J.exports;a["a"].use(i["a"]),a["a"].config.productionTip=!1,new a["a"]({render:t=>t(N)}).$mount("#app")},"64a9":function(t,s,e){}});
//# sourceMappingURL=app.c323e2a5.js.map