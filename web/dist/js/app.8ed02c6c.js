(function(t){function s(s){for(var e,n,o=s[0],d=s[1],c=s[2],l=0,p=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(t[e]=d[e]);_&&_(s);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,s=0;s<r.length;s++){for(var a=r[s],e=!0,o=1;o<a.length;o++){var d=a[o];0!==i[d]&&(e=!1)}e&&(r.splice(s--,1),t=n(n.s=a[0]))}return t}var e={},i={app:0},r=[];function n(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,s,a){n.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,s){if(1&s&&(t=n(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)n.d(a,e,function(s){return t[s]}.bind(null,e));return a},n.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(s,"a",s),s},n.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},n.p="/dist/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],d=o.push.bind(o);o.push=s,o=o.slice();for(var c=0;c<o.length;c++)s(o[c]);var _=d;r.push([0,"chunk-vendors"]),a()})({0:function(t,s,a){t.exports=a("56d7")},"034f":function(t,s,a){"use strict";var e=a("64a9"),i=a.n(e);i.a},4678:function(t,s,a){var e={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var s=r(t);return a(s)}function r(t){if(!a.o(e,t)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e[t]}i.keys=function(){return Object.keys(e)},i.resolve=r,t.exports=i,i.id="4678"},"56d7":function(t,s,a){"use strict";a.r(s);var e=a("2b0e"),i=a("f23d"),r=(a("202f"),function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"app"}},[a("a-layout",{staticClass:"layout",attrs:{id:"components-layout-demo-top"}},[a("a-layout-header",[a("div",{staticClass:"logo"}),a("a-row",[a("a-col",{attrs:{span:17}},[a("a-menu",{style:{lineHeight:"64px"},attrs:{theme:"dark",mode:"horizontal",defaultSelectedKeys:["redis_info"]},on:{click:t.menuClick}},[a("a-menu-item",{key:"redis_info"},[a("a-icon",{attrs:{type:"info-circle"}}),t._v("系统详情")],1),a("a-menu-item",{key:"redis_monitor"},[a("a-icon",{attrs:{type:"dashboard"}}),t._v("性能监控")],1),a("a-menu-item",{key:"redis_pubsub"},[a("a-icon",{attrs:{type:"swap"}}),t._v("发布订阅")],1)],1)],1),a("a-col",{attrs:{span:5}},[a("a-row",{attrs:{type:"flex",justify:"end"}},[a("a-col",{attrs:{span:10}},[a("a-select",{staticStyle:{width:"150px"},attrs:{value:t.redis_ip},on:{change:t.change_redis}},t._l(t.containers,(function(s){return a("a-select-option",{key:s.ip,attrs:{value:s.ip}},[t._v(t._s(s.name))])})),1)],1),a("a-col",{attrs:{span:2,offset:1}},[a("a-dropdown",[a("a-icon",{staticClass:"ant-dropdown-link",staticStyle:{color:"#ffffff","font-size":"28px","padding-top":"17px"},attrs:{type:"setting"}}),a("a-menu",{attrs:{slot:"overlay"},on:{click:t.settingClick},slot:"overlay"},[a("a-menu-item",{key:"about"},[a("a-icon",{attrs:{type:"info-circle"}}),t._v("关于程序")],1),a("a-menu-item",{key:"edit"},[a("a-icon",{attrs:{type:"edit"}}),t._v("连接管理")],1)],1)],1)],1)],1)],1)],1)],1),a("a-layout-content",{staticStyle:{padding:"0 50px",height:"92vh"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"redis_monitor"==t.memu_key,expression:"memu_key=='redis_monitor'"}]},[a("a-row",[a("a-col",{attrs:{span:12}},[a("div",{ref:"chart",staticStyle:{height:"46vh",width:"48vw"}})]),a("a-col",{attrs:{span:12}},[a("div",{ref:"chart1",staticStyle:{height:"46vh",width:"48vw"}})])],1),a("a-row",[a("a-col",{attrs:{span:12}},[a("div",{ref:"chart2",staticStyle:{height:"46vh",width:"48vw"}})]),a("a-col",{attrs:{span:12}},[a("div",{ref:"chart3",staticStyle:{height:"46vh",width:"48vw"}})])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"redis_info"==t.memu_key,expression:"memu_key=='redis_info'"}]},[a("a-row",[a("a-col",{staticStyle:{"padding-right":"10px"},attrs:{span:16}},[a("a-divider",[t._v("高时延日志")]),a("a-table",{staticStyle:{"word-break":"break-all"},attrs:{rowKey:"id",columns:t.logs_columns,loading:t.logs_loading,dataSource:t.logs_data,pagination:!1,scroll:{y:310}},scopedSlots:t._u([{key:"time",fn:function(s){return[t._v("\n                  "+t._s(new Date(1e3*s).Format("yyyy-MM-dd HH:mm:ss"))+"\n                ")]}}])}),a("a-divider",[t._v("客户端列表")]),a("a-table",{attrs:{rowKey:"id",columns:t.clients_columns,loading:t.clients_loading,dataSource:t.clients_data,pagination:{pageSize:50},scroll:{y:268}},scopedSlots:t._u([{key:"time",fn:function(s){return[t._v("\n                  "+t._s(t.formatSeconds(s))+"\n                ")]}}])})],1),a("a-col",{attrs:{span:8}},[a("a-collapse",{staticStyle:{"font-size":"15px"},attrs:{accordion:"",activeKey:"1"}},[a("a-collapse-panel",{key:"1"},[a("template",{slot:"header"},[a("a-icon",{attrs:{type:"home"}}),t._v(" 服务端信息 | "+t._s(t.redis_ip))],1),a("a-card",[a("a-card-grid",{staticClass:"gridcard"},[t._v("版本信息: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.redis_version)+" | "+t._s(t.info_data.arch_bits))])],1),a("a-card-grid",{staticClass:"gridcard"},[t._v("PID | PORT: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.process_id)+" | "+t._s(t.info_data.tcp_port))])],1),a("a-card-grid",{staticClass:"gridcard"},[t._v("服务模式: "+t._s(t.info_data.redis_mode))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("运行时间: "+t._s(t.formatSeconds(t.info_data.uptime_in_seconds)))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("系统版本: "+t._s(t.info_data.os))])],1)],2),a("a-collapse-panel",{key:"2"},[a("template",{slot:"header"},[a("a-icon",{attrs:{type:"user"}}),t._v(" 客户端信息")],1),a("a-card",[a("a-card-grid",{staticClass:"gridcard"},[t._v("已连接客户端的数量: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.connected_clients))])],1),a("a-card-grid",{staticClass:"gridcard"},[t._v("阻塞的客户端的数量: "),a("a-tag",{attrs:{color:"orange"}},[t._v(t._s(t.info_data.blocked_clients))])],1)],1)],2),a("a-collapse-panel",{key:"3"},[a("template",{slot:"header"},[a("a-icon",{attrs:{type:"bar-chart"}}),t._v(" 统计信息")],1),a("a-card",[a("a-card-grid",{staticClass:"gridcard"},[t._v("已接受的连接请求数量: "+t._s(t.info_data.total_connections_received))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("已执行的命令数量: "+t._s(t.info_data.total_commands_processed))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("总流入数据量: "+t._s(t.info_data.total_net_input_bytes))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("总流出数据量: "+t._s(t.info_data.total_net_output_bytes))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("每秒流入数据量: "+t._s(t.info_data.instantaneous_input_kbps))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("每秒流出数据量: "+t._s(t.info_data.instantaneous_output_kbps))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("每秒执行命令数量: "+t._s(t.info_data.instantaneous_ops_per_sec))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("过期删除的键: "+t._s(t.info_data.expired_keys))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("驱逐(evict)的键数量: "+t._s(t.info_data.evicted_keys))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("查找数据库键成功的次数: "+t._s(t.info_data.keyspace_hits))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("订阅的频道数量: "+t._s(t.info_data.pubsub_channels))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("订阅的模式数量: "+t._s(t.info_data.pubsub_patterns))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("拒绝的连接请求数量: "+t._s(t.info_data.rejected_connections))])],1)],2),a("a-collapse-panel",{key:"4"},[a("template",{slot:"header"},[a("a-icon",{attrs:{type:"hdd"}}),t._v(" 持久信息")],1),a("a-card",[a("a-card-grid",{staticClass:"gridcard"},[t._v("AOF是否处于打开状态: "+t._s(t.info_data.aof_enabled))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("AOF文件目前的大小: "+t._s(t.info_data.aof_current_size))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("RDB文件最近保存时间: "),a("br"),t._v(" "+t._s(new Date(1e3*t.info_data.rdb_last_save_time).Format("yyyy-MM-dd HH:mm:ss")))])],1)],2),a("a-collapse-panel",{key:"5"},[a("template",{slot:"header"},[a("a-icon",{attrs:{type:"table"}}),t._v(" 内存信息")],1),a("a-card",[a("a-card-grid",{staticClass:"gridcard"},[t._v("系统内存: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.total_system_memory_human))])],1),a("a-card-grid",{staticClass:"gridcard"},[t._v("占用内存: "),a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.info_data.used_memory_human))])],1),a("a-card-grid",{staticClass:"gridcard"},[t._v("系统内存占用: "+t._s(t.info_data.used_memory_rss_human))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("内存消耗峰值: "+t._s(t.info_data.used_memory_peak_human))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("内存碎片率: "+t._s(t.info_data.mem_fragmentation_ratio))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("内存分配器: "+t._s(t.info_data.mem_allocator))])],1)],2),a("a-collapse-panel",{key:"6"},[a("template",{slot:"header"},[a("a-icon",{attrs:{type:"laptop"}}),t._v(" 处理器信息")],1),a("a-card",[a("a-card-grid",{staticClass:"gridcard"},[t._v("系统CPU: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.info_data.used_cpu_sys))])],1),a("a-card-grid",{staticClass:"gridcard"},[t._v("用户CPU: "),a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(t.info_data.used_cpu_user))])],1),a("a-card-grid",{staticClass:"gridcard"},[t._v("后台进程系统CPU: "+t._s(t.info_data.used_cpu_sys_children))]),a("a-card-grid",{staticClass:"gridcard"},[t._v("后台进程用户CPU: "+t._s(t.info_data.used_cpu_user_children))])],1)],2),a("a-collapse-panel",{key:"7"},[a("template",{slot:"header"},[a("a-icon",{attrs:{type:"database"}}),t._v(" 键值信息")],1),a("a-card",[t.format_db_nums(t.info_data.db0)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB0: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db0)))])],1):t._e(),t.format_db_nums(t.info_data.db1)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB1: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db1)))])],1):t._e(),t.format_db_nums(t.info_data.db2)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB2: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db2)))])],1):t._e(),t.format_db_nums(t.info_data.db3)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB3: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db3)))])],1):t._e(),t.format_db_nums(t.info_data.db4)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB4: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db4)))])],1):t._e(),t.format_db_nums(t.info_data.db5)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB5: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db5)))])],1):t._e(),t.format_db_nums(t.info_data.db6)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB6: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db6)))])],1):t._e(),t.format_db_nums(t.info_data.db7)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB7: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db7)))])],1):t._e(),t.format_db_nums(t.info_data.db8)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB8: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db8)))])],1):t._e(),t.format_db_nums(t.info_data.db9)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB9: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db9)))])],1):t._e(),t.format_db_nums(t.info_data.db10)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB10: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db10)))])],1):t._e(),t.format_db_nums(t.info_data.db11)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB11: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db11)))])],1):t._e(),t.format_db_nums(t.info_data.db12)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB12: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db12)))])],1):t._e(),t.format_db_nums(t.info_data.db13)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB13: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db13)))])],1):t._e(),t.format_db_nums(t.info_data.db14)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB14: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db14)))])],1):t._e(),t.format_db_nums(t.info_data.db15)>0?a("a-card-grid",{staticClass:"gridcard25"},[t._v("DB15: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(t.format_db_nums(t.info_data.db15)))])],1):t._e()],1)],2)],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"redis_pubsub"==t.memu_key,expression:"memu_key=='redis_pubsub'"}]},[a("a-row",{staticStyle:{"padding-top":"10px"}},[a("a-col",{staticStyle:{"padding-right":"10px"},attrs:{span:16}},[a("div",{staticClass:"redis-output-container"},[a("a-list",{attrs:{bordered:"",dataSource:t.redis_output[t.redis_ip]},scopedSlots:t._u([{key:"renderItem",fn:function(s){return a("a-list-item",{},[t._v(t._s(s))])}}])},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("Redis输出信息:")])])],1)]),a("a-col",{staticStyle:{"padding-top":"8px"},attrs:{span:8}},[a("a-input-group",{attrs:{compact:""}},[a("a-input",{staticStyle:{width:"38%"},attrs:{placeholder:"发布/订阅的Channel"},model:{value:t.pubsub_key,callback:function(s){t.pubsub_key=s},expression:"pubsub_key"}}),a("a-input",{staticStyle:{width:"38%"},attrs:{placeholder:"发布的信息"},model:{value:t.pubsub_msg,callback:function(s){t.pubsub_msg=s},expression:"pubsub_msg"}}),a("a-button",{staticStyle:{background:"#108ee9","border-color":"#108ee9"},attrs:{type:"primary"},on:{click:t.publish_msg}},[t._v("发布")]),a("a-button",{staticStyle:{background:"#87d068","border-color":"#87d068"},attrs:{type:"primary"},on:{click:t.subscribe_msg}},[t._v("订阅")])],1),a("a-divider",[t._v("发布列表")]),a("div",{staticStyle:{"line-height":"2"}},[t._l(t.publish_keys[t.redis_ip],(function(s){return[s.length>50?a("a-tooltip",{key:s,attrs:{title:s}},[a("a-tag",{key:s,attrs:{color:"#108ee9",closable:!0,afterClose:function(){return t.handlePubClose(s)}},on:{click:function(a){return t.copyPublishMsg(s)}}},[t._v("\n                      "+t._s(s.slice(0,50)+"...")+"\n                    ")])],1):a("a-tag",{key:s,attrs:{color:"#108ee9",closable:!0,afterClose:function(){return t.handlePubClose(s)}},on:{click:function(a){return t.copyPublishMsg(s)}}},[t._v("\n                    "+t._s(s)+"\n                  ")]),t._v("  \n                ")]}))],2),a("a-divider",[t._v("订阅列表")]),a("div",{staticStyle:{"line-height":"2"}},[t._l(t.subscribe_keys[t.redis_ip],(function(s){return[s.length>50?a("a-tooltip",{key:s,attrs:{title:s}},[a("a-tag",{key:s,attrs:{color:"#87d068",closable:!0,afterClose:function(){return t.handleTagClose(s)}},on:{click:function(){t.pubsub_key=s}}},[t._v("\n                      "+t._s(s.slice(0,50)+"...")+"\n                    ")])],1):a("a-tag",{key:s,attrs:{color:"#87d068",closable:!0,afterClose:function(){return t.handleTagClose(s)}},on:{click:function(){t.pubsub_key=s}}},[t._v("\n                    "+t._s(s)+"\n                  ")])]}))],2)],1)],1)],1)])],1),a("a-button",{staticClass:"command-botton",attrs:{shape:"circle",icon:"thunderbolt",size:"large"},on:{click:function(){t.command_visible=!0}}}),a("a-drawer",{attrs:{width:"560",placement:"right",visible:t.visible},on:{close:function(){t.visible=!1}}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Redis连接管理 "),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{staticStyle:{color:"#42b983"},attrs:{icon:"plus"},on:{click:t.add_container}},[t._v("添加连接")])],1),a("a-card",t._l(t.containers,(function(s,e){return a("a-card-grid",{key:e,staticClass:"gridcard100"},[t._v("\n          名称: "),a("a-tag",{attrs:{color:"green"}},[t._v(t._s(s.name))]),a("a-divider",{attrs:{type:"vertical"}}),t._v("\n          IP: "),a("a-tag",{attrs:{color:"blue"}},[t._v(t._s(s.ip))]),a("a-divider",{attrs:{type:"vertical"}}),t._v("\n          端口: "+t._s(s.port)+" "),a("a-divider",{attrs:{type:"vertical"}}),t._v("\n          DB: "+t._s(s.db)+" "),a("br"),a("br"),t._v("\n          密码: "+t._s(s.password)+" "),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{shape:"circle",icon:"edit"},on:{click:function(a){return t.edit_container(s)}}}),a("a-button",{attrs:{shape:"circle",icon:"delete",type:"danger"},on:{click:function(a){return t.delete_container(s.ip)}}})],1)})),1)],1),a("a-drawer",{attrs:{title:t.children_drawl_name,width:"280",visible:t.visible_children},on:{close:function(){t.visible_children=!1}}},["修改连接"==t.children_drawl_name?a("a-input",{attrs:{placeholder:"连接IP",size:"large",disabled:""},model:{value:t.container_tmp.ip,callback:function(s){t.$set(t.container_tmp,"ip",s)},expression:"container_tmp.ip"}},[a("a-icon",{attrs:{slot:"prefix",type:"api"},slot:"prefix"}),t.container_tmp.ip?a("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.ip=""}},slot:"suffix"}):t._e()],1):a("a-input",{attrs:{placeholder:"连接IP",size:"large"},on:{change:function(){t.container_tmp.name=t.container_tmp.ip}},model:{value:t.container_tmp.ip,callback:function(s){t.$set(t.container_tmp,"ip",s)},expression:"container_tmp.ip"}},[a("a-icon",{attrs:{slot:"prefix",type:"api"},slot:"prefix"}),t.container_tmp.ip?a("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.ip=""}},slot:"suffix"}):t._e()],1),a("a-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"连接名称",size:"large"},model:{value:t.container_tmp.name,callback:function(s){t.$set(t.container_tmp,"name",s)},expression:"container_tmp.name"}},[a("a-icon",{attrs:{slot:"prefix",type:"user"},slot:"prefix"}),t.container_tmp.name?a("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.name=""}},slot:"suffix"}):t._e()],1),a("a-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"密码",size:"large"},model:{value:t.container_tmp.password,callback:function(s){t.$set(t.container_tmp,"password",s)},expression:"container_tmp.password"}},[a("a-icon",{attrs:{slot:"prefix",type:"warning"},slot:"prefix"}),t.container_tmp.password?a("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.password=""}},slot:"suffix"}):t._e()],1),a("a-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"端口",size:"large"},model:{value:t.container_tmp.port,callback:function(s){t.$set(t.container_tmp,"port",s)},expression:"container_tmp.port"}},[a("a-icon",{attrs:{slot:"prefix",type:"appstore"},slot:"prefix"}),t.container_tmp.port?a("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.port=""}},slot:"suffix"}):t._e()],1),a("a-input",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"DB",size:"large"},model:{value:t.container_tmp.db,callback:function(s){t.$set(t.container_tmp,"db",s)},expression:"container_tmp.db"}},[a("a-icon",{attrs:{slot:"prefix",type:"hdd"},slot:"prefix"}),t.container_tmp.db?a("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(){t.container_tmp.db=""}},slot:"suffix"}):t._e()],1),"修改连接"==t.children_drawl_name?a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",loading:t.visible_children_loading},on:{click:t.upload_edit}},[t._v("确认")]):a("a-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary",loading:t.visible_children_loading},on:{click:t.upload_add}},[t._v("确认")])],1),a("a-drawer",{attrs:{height:"500",placement:"bottom",visible:t.command_visible},on:{close:function(){t.command_visible=!1}}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v("Redis终端")]),a("a-textarea",{staticStyle:{background:"silver","word-break":"break-all"},attrs:{id:"redis_command_output",placeholder:"Redis命令输出",rows:16},model:{value:t.redis_command_output,callback:function(s){t.redis_command_output=s},expression:"redis_command_output"}}),a("a-input-search",{staticStyle:{"margin-top":"10px"},attrs:{placeholder:"请输入执行的命令"},on:{search:t.execute_command},model:{value:t.redis_command,callback:function(s){t.redis_command=s},expression:"redis_command"}},[a("a-button",{attrs:{slot:"enterButton",type:"primary"},slot:"enterButton"},[t._v("执行")])],1)],1)],1)}),n=[],o=a("bc3a"),d=a.n(o),c=a("313e"),_=a.n(c);Date.prototype.Format=function(t){var s={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"S+":this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[a]:("00"+s[a]).substr(String(s[a]).length)));return t};const l="http:"===location.protocol?"ws:":"wss:";let p=location.origin,u=`${l}//${location.host}/ws`;var h={name:"app",data(){return{log:console.log,url:p,ws_url:u,redis_name:"",redis_ip:"",redis_db:0,containers:{},container_tmp:{ip:"",name:"",password:"",port:6379,db:0,status:0},dbs:[],visible:!1,visible_children:!1,visible_children_loading:!1,children_drawl_name:"新增连接",memu_key:"",subscribe_keys:{},subscribe_keys_flag:{},publish_keys:{},pubsub_key:"",pubsub_msg:"",redis_output:{},redis_command:"",redis_command_output:"",command_visible:!1,time_data:{},info_data:{},info_data_map:{},info_data_flags:{},logs_loading:!1,logs_data:[],logs_columns:[{title:"ID",dataIndex:"id",width:100},{title:"记录时间",dataIndex:"time",width:200,scopedSlots:{customRender:"time"}},{title:"执行时间(微秒)",dataIndex:"time_used",width:150},{title:"日志详情",dataIndex:"msg"}],clients_loading:!1,clients_data:[],clients_columns:[{title:"ID",dataIndex:"id",width:150},{title:"主机",dataIndex:"addr",width:200},{title:"连接时长",dataIndex:"age",scopedSlots:{customRender:"time"},width:150},{title:"数据库ID",dataIndex:"db",width:150},{title:"订阅频道",dataIndex:"sub",width:150},{title:"最近执行",dataIndex:"cmd",width:150}],websocket:null,info_input_kbps:{},info_output_kbps:{},info_used_memory:{},info_ops_per_sec:{},info_used_cpu_user:{},myChart:null,myChart1:null,myChart2:null,myChart3:null,option:{title:{text:"流量监控"},tooltip:{trigger:"axis",axisPointer:{animation:!1}},axisPointer:{link:{xAxisIndex:"all"}},grid:[{left:50,right:50,height:"32%"},{left:50,right:50,top:"60%",height:"32%"}],xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:[]},{gridIndex:1,type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:[],position:"top"}],yAxis:[{name:"上行流量(Kbps/s)",type:"value"},{gridIndex:1,name:"下行流量(Kbps/s)",type:"value",inverse:!0}],series:[{name:"上行流量",type:"line",symbolSize:8,hoverAnimation:!1,data:[]},{name:"下行流量",type:"line",xAxisIndex:1,yAxisIndex:1,symbolSize:8,hoverAnimation:!1,data:[]}]},option1:{title:{text:"内存监控"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{name:"内存占用(KB)",type:"value"},grid:{left:0,right:0,bottom:0,containLabel:!0},series:[{data:[],type:"line",smooth:!0}]},option2:{title:{text:"每秒执行操作数"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},grid:{left:20,right:20,containLabel:!0},series:[{data:[],type:"line",smooth:!0}]},option3:{title:{text:"CPU监控"},tooltip:{trigger:"axis"},xAxis:{type:"category",boundaryGap:!1,data:[]},yAxis:{type:"value"},grid:{left:20,right:20,containLabel:!0},series:[{data:[],type:"line",smooth:!0}]}}},methods:{menuClick(t){this.memu_key=t.key,"redis_info"===this.memu_key?this.get_redis_infos():"redis_monitor"===this.memu_key?this.websocket_get_redis_info():this.memu_key},settingClick(t){"about"===t.key?this.$message.success("RedisGo Web是为更好的监控/管理内网的Redis而倾心打造"):"edit"===t.key&&(this.visible=!0)},websocket_get_redis_info(){void 0===this.info_data_flags[this.redis_ip]&&(this.websocket.send(JSON.stringify({type:1,ip:this.redis_ip})),this.info_data_flags[this.redis_ip]=!0)},change_redis(t){this.redis_ip=t,"redis_monitor"===this.memu_key?this.websocket_get_redis_info():"redis_info"===this.memu_key&&this.get_redis_infos()},get_redis_infos(){this.get_info(),this.get_logs(),this.get_clients()},get_info(){d.a.get(this.url+"/containers?method=info&ip="+this.redis_ip).then(t=>{this.info_data_map[this.redis_ip]=t.data.data,this.info_data=t.data.data})},get_logs(){this.logs_loading=!0,d.a.get(this.url+"/containers?method=logs&ip="+this.redis_ip).then(t=>{this.logs_data=t.data.data,this.logs_loading=!1})},get_clients(){this.clients_loading=!0,d.a.get(this.url+"/containers?method=clients&ip="+this.redis_ip).then(t=>{this.clients_data=t.data.data,this.clients_loading=!1})},publish_msg(){""!=this.redis_ip?""!=this.pubsub_key?d.a.get(this.url+`/containers?method=publish&ip=${this.redis_ip}&key=${this.pubsub_key}&msg=${this.pubsub_msg}`).then(t=>{let s=t.data;0!=s.code?this.$message.error(s.msg):(this.$message.success("Publish成功"),void 0===this.publish_keys[this.redis_ip]&&(this.publish_keys[this.redis_ip]=[]),-1===this.publish_keys[this.redis_ip].indexOf(s.msg+" | "+s.data)&&(this.publish_keys[this.redis_ip].push(s.msg+" | "+s.data),this.$forceUpdate()))}):this.$message.error("请输入Channel再试"):this.$message.error("未检测到有效的Redis连接, 请在设置中添加并刷新页面",10)},subscribe_msg(){""!=this.redis_ip?""!=this.pubsub_key?void 0===this.subscribe_keys_flag[this.redis_ip]?(this.websocket.send(JSON.stringify({type:2,ip:this.redis_ip,channel:this.pubsub_key,command:"open"})),this.subscribe_keys_flag[this.redis_ip]=!0):this.$message.error(`已经订阅 ${this.pubsub_key}, 无需重复订阅`):this.$message.error("请输入Channel再试"):this.$message.error("未检测到有效的Redis连接, 请在设置中添加并刷新页面",10)},upload_add(){this.visible_children_loading=!0,d.a.get(this.url+`/containers?method=add&ip=${this.container_tmp.ip}&name=${this.container_tmp.name}&password=${this.container_tmp.password}&port=${this.container_tmp.port}&db=${this.container_tmp.db}`).then(t=>{this.visible_children_loading=!1;let s=t.data;0!=s.code?this.$message.error(s.msg):(this.containers[this.container_tmp.ip]=s.data,this.$message.success("添加成功"),this.visible_children=!1,1===Object.keys(this.containers).length&&(this.redis_ip=this.container_tmp.ip,this.redis_name=this.container_tmp.name,this.menuClick({key:"redis_info"})))})},upload_edit(){this.visible_children_loading=!0,d.a.get(this.url+`/containers?method=edit&ip=${this.container_tmp.ip}&name=${this.container_tmp.name}&password=${this.container_tmp.password}&port=${this.container_tmp.port}&db=${this.container_tmp.db}`).then(t=>{this.visible_children_loading=!1;let s=t.data;0!=s.code?this.$message.error(s.msg):(this.containers[this.container_tmp.ip]=s.data,this.$message.success("修改成功"),this.visible_children=!1)})},add_container(){this.visible_children=!0,this.children_drawl_name="新增连接",this.container_tmp.ip="",this.container_tmp.password="",this.container_tmp.name="",this.container_tmp.port=6379,this.container_tmp.db=0},edit_container(t){this.visible_children=!0,this.children_drawl_name="修改连接",this.container_tmp.ip=t.ip,this.container_tmp.password=t.password,this.container_tmp.name=t.name,this.container_tmp.port=t.port,this.container_tmp.db=t.db},delete_container(t){d.a.get(this.url+"/containers?method=delete&ip="+t).then(s=>{let a=s.data.code;if(0==a){if(this.$message.success("成功删除Redis连接"),t===this.redis_ip){let s=!1;for(let a in this.containers)if(this.containers[a].ip!==t){this.redis_ip=this.containers[a].ip,s=!0;break}s||this.$message.error("未检测到有效的Redis连接, 请在右上角的设置中添加",10)}delete this.containers[t],this.$forceUpdate()}})},execute_command(){d.a.get(this.url+`/containers?method=execute&ip=${this.redis_ip}&command=${this.redis_command}`).then(t=>{let s=t.data.code;if(0==s){let s=t.data.data;Array.isArray(s)&&(s=s.join(", ")),this.redis_command_output+=`${(new Date).Format("yyyy-MM-dd HH:mm:ss")}\t${s}\n`;const a=document.getElementById("redis_command_output");a.scrollTop=a.scrollHeight}})},circle_push(t,s,a=36e3){return void 0===t&&(t=[]),t.push(s),t.length>a&&t.shift(),t},format_db_nums(t){if(void 0===t)return 0;if(""===t)return 0;let s=t.split(",")[0];return s.split("=")[1]},formatSeconds(t){var s=parseInt(t),a=0,e=0;s>60&&(a=parseInt(s/60),s=parseInt(s%60),a>60&&(e=parseInt(a/60),a=parseInt(a%60)));var i=parseInt(s)+"秒";return a>0&&(i=parseInt(a)+"分"+i),e>0&&(i=parseInt(e)+"小时"+i),i},process_info_data(t){const s=t.msg,a=JSON.parse(t.data);this.info_data_map[s]=a,this.info_data=this.info_data_map[this.redis_ip],this.time_data[s]=this.circle_push(this.time_data[s],(new Date).Format("HH:mm:ss")),this.info_input_kbps[s]=this.circle_push(this.info_input_kbps[s],a["instantaneous_input_kbps"]),this.info_output_kbps[s]=this.circle_push(this.info_output_kbps[s],a["instantaneous_output_kbps"]),this.info_used_memory[s]=this.circle_push(this.info_used_memory[s],a["used_memory"]/1024),this.info_ops_per_sec[s]=this.circle_push(this.info_ops_per_sec[s],a["instantaneous_ops_per_sec"]),this.info_used_cpu_user[s]=this.circle_push(this.info_used_cpu_user[s],a["used_cpu_user"]),this.updateCharts()},receiveData(t){const s=JSON.parse(t.data);if(1==s.type)this.process_info_data(s);else if(2==s.type){if(0==s.status)return this.$message.success(`${s.msg} 订阅成功`),void 0===this.subscribe_keys[this.redis_ip]&&(this.subscribe_keys[this.redis_ip]=[]),void(-1===this.subscribe_keys[this.redis_ip].indexOf(this.pubsub_key)&&(this.subscribe_keys[this.redis_ip].push(this.pubsub_key),this.$forceUpdate()));if(-1==s.status){this.$message.success(`${s.msg} 取消订阅成功`);const t=this.subscribe_keys[s.msg].filter(t=>t!==s.data);return this.subscribe_keys[this.redis_ip]=t,void this.$forceUpdate()}this.redis_output[this.redis_ip]=this.circle_push(this.redis_output[this.redis_ip],`从 ${s.msg} 接收 ${s.data} \n`),this.$forceUpdate()}},copyPublishMsg(t){let s=t.split(" | ");this.pubsub_key=s[0],this.pubsub_msg=s[1]},handlePubClose(t){const s=this.publish_keys[this.redis_ip].filter(s=>s!==t);this.publish_keys[this.redis_ip]=s,this.$forceUpdate()},handleTagClose(t){this.subscribe_keys_flag[this.redis_ip]&&(this.websocket.send(JSON.stringify({type:2,ip:this.redis_ip,channel:t,command:"close"})),delete this.subscribe_keys_flag[this.redis_ip])},updateCharts(){this.option.xAxis[0].data=this.time_data[this.redis_ip],this.option.xAxis[1].data=this.time_data[this.redis_ip],this.option.series[0].data=this.info_input_kbps[this.redis_ip],this.option.series[1].data=this.info_output_kbps[this.redis_ip],this.myChart.setOption(this.option),this.option1.xAxis.data=this.time_data[this.redis_ip],this.option1.series[0].data=this.info_used_memory[this.redis_ip],this.myChart1.setOption(this.option1),this.option2.xAxis.data=this.time_data[this.redis_ip],this.option2.series[0].data=this.info_ops_per_sec[this.redis_ip],this.myChart2.setOption(this.option2),this.option3.xAxis.data=this.time_data[this.redis_ip],this.option3.series[0].data=this.info_used_cpu_user[this.redis_ip],this.myChart3.setOption(this.option3)}},created(){for(let s=0;s<16;s++)this.dbs.push({label:s,value:s});d.a.get(this.url+"/containers?method=list").then(t=>{let s=t.data.data;for(let a in s)""===this.redis_ip&&(this.redis_ip=s[a]["ip"],this.redis_name=s[a]["name"]);""===this.redis_ip?this.$message.error("未检测到有效的Redis连接, 请在右上角的设置中添加",10):(this.containers=s,this.menuClick({key:"redis_info"}))});let t=new WebSocket(this.ws_url);t.onopen=()=>this.log("WebSocket连接成功"),t.onerror=()=>this.$message.error("WebSocket连接发生错误, 请刷新页面"),t.onclose=t=>{this.$message.error("WebSocket连接关闭, 请刷新页面"),this.log(`WebSocket连接关闭 (${t}), 请刷新页面`)},t.onmessage=t=>this.receiveData(t),this.websocket=t},mounted(){this.myChart=_.a.init(this.$refs.chart),this.myChart1=_.a.init(this.$refs.chart1),this.myChart2=_.a.init(this.$refs.chart2),this.myChart3=_.a.init(this.$refs.chart3),this.updateCharts()}},m=h,f=(a("034f"),a("2877")),b=Object(f["a"])(m,r,n,!1,null,null,null),g=b.exports;e["a"].use(i["a"]),e["a"].config.productionTip=!1,new e["a"]({render:t=>t(g)}).$mount("#app")},"64a9":function(t,s,a){}});
//# sourceMappingURL=app.8ed02c6c.js.map